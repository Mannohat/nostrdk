---
import type { CollectionEntry } from 'astro:content';
import NostrLayout from '../layouts/NostrLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';

type Props = CollectionEntry<'blog'>['data'];
const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<NostrLayout title={`${title} | Nostr.dk`} description={description}>
	<article class="blog-post">
		{heroImage && (
			<div class="hero-image">
				<img src={heroImage} alt={title} loading="lazy" />
			</div>
		)}
		<div class="prose">
			<div class="post-header">
				<div class="date">
					<FormattedDate date={pubDate} />
					{updatedDate && (
						<span class="last-updated">
							Â· Opdateret <FormattedDate date={updatedDate} />
						</span>
					)}
				</div>
				<h1>{title}</h1>
				<hr />
			</div>
			<slot />
		</div>
	</article>

	<style>
		.blog-post {
			max-width: 800px;
			margin: 40px auto;
			padding: 0 20px;
		}
		.hero-image {
			width: 100%;
			margin-bottom: 40px;
		}
		.hero-image img {
			width: 100%;
			border-radius: 12px;
		}
		.prose {
			line-height: 1.8;
		}
		.post-header {
			margin-bottom: 40px;
			text-align: center;
		}
		.post-header h1 {
			font-size: 2.5rem;
			margin: 15px 0;
		}
		.date {
			color: rgba(255,255,255,0.5);
			font-size: 0.95rem;
		}
		.last-updated {
			font-style: italic;
		}
		.prose h2 {
			font-size: 1.8rem;
			margin-top: 50px;
			margin-bottom: 20px;
			color: #a084ca;
		}
		.prose p {
			margin-bottom: 20px;
		}
		.prose a {
			color: #a084ca;
			text-decoration: none;
		}
		.prose a:hover {
			text-decoration: underline;
		}
		hr {
			border: none;
			border-top: 1px solid rgba(160,132,202,0.3);
			margin: 20px auto;
			max-width: 200px;
		}
	</style>
</NostrLayout>